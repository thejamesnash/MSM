<!DOCTYPE HTML>
<html>
    <head>
        <title>Credit cards</title>
        <meta name="viewport" content="initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <link rel="stylesheet" href="global.css" type="text/css">
    
<link href="https://msmux.github.io/testing/sandbox/central-form/style.css"  property="stylesheet" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="check.css" type="text/css">
<style>

    

</style>
    </head>
    <body>
        
        <main>
    
<form class="central-form">
<header>
    <h1>Check your eligibility for <span class="cardType">balance transfer cards</span></h1>
    <h2>Page 1 of 6</h2>
    <p>Checking your eligibility is quick and easy and will show you which cards you're most likely to get without damaging your credit rating.</p>
    <p>We need some details from you to help make an assessment about yourfinancial position that will give us the best answers and provide you with the right card.</p>
    
            <p><button class="next btn btn__primary" id="start">Start</button></p>
        </header>
    <div class="form-wrapper">
<!--
    <div class="progress-wrap">
    <p id="currentSection">Card types</p>
    <progress max="100" value="0"></progress>
    </div>
-->
    <div class="form-scroll-wrapper">
        
        
        <fieldset class="ss collapsable active first">
            <legend><span>Check your eligibility for <span class="cardType">balance transfer cards</span></span></legend>
            <p>Page 2 of 6 <strong>Who you are</strong></p>
            <ol class="active first"  data-group-index="0">
                <li>
                    <div>
                        <p class="label">What is your title?</p><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Please enter your first name correctly and avoid the use of nicknames. Providing your correct first name will help find your credit file.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-pseudo-select">
                            <select id="nameTitle" name="nameTitle">
                                <option name="nameTitle" value="">Please select a title</option>
                        <option id="nameTitle-0" name="nameTitle" value="Mr">Mr</option>
                            <option id="nameTitle-1" name="nameTitle" value="Mrs">Mrs</option>
                            <option  id="nameTitle-2" name="nameTitle" value="Miss">Miss</option>
                            <option id="nameTitle-3" name="nameTitle"  value="Ms">Ms</option>
                            <option id="nameTitle-4" name="nameTitle"  value="Other">Other</option>
                        </select>
                        </div>
                    </div>
                </li>
                <li>
                    <div>
                        <label for="firstName-0">What is your first name?</label><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">We use your name to help find your credit file, so make sure you tell us your full name, and don't use a nickname (e.g. put David instead of Dave)</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="firstName-0" name="firstName" placeholder="First name" type="text">
                    </div>
                </li>
                <li>
                    <div>
                        <label for="lastName-0">What is your last name?</label><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Please enter your last name correctly and avoid the use of nicknames. Providing your correct last name will help find your credit file</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="lastName-0" name="lastName" placeholder="Last name" type="text">
                    </div>
                </li>
            </ol>
            <ol data-group-index="1">
                
                <li>
                    <div>
                        <p class="label">What is your date of birth?</p><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">We use your date of birth to help find your credit file. Please enter it in the format dd/mm/yyyy</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-date-wrap">
                            <input id="q-1-3-day" name="dobDay" placeholder="DD" type="tel"><input id="q-1-3-month" name="dobMonth" placeholder="MM" type="tel"><input id="q-1-3-year" name="dobYear" placeholder="YYYY" type="tel">
                        </div>
                    </div>
                </li>
            </ol>
            <ol data-group-index="2">
                <li>
                    <div>
                        <p class="label">What is your employment status?</p><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Credit card companies take your employment status into consideration when deciding whether to offer you a card, so this information helps us work out an eligibility score out of ten, to show how likely you are to be accepted for each card.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <ul>
                            <li><input id="q-1-4-0" name="q-1-4" type="radio"><label for="q-1-4-0">Full time</label></li>
                            <li><input id="q-1-4-1" name="q-1-4" type="radio"><label for="q-1-4-1">Part time</label></li>
                            <li><input id="q-1-4-2" name="q-1-4" type="radio"><label for="q-1-4-2">Self employed</label></li>
                            <li><input id="q-1-4-3" name="q-1-4" type="radio"><label for="q-1-4-3">Retired</label></li>
                            <li><input id="q-1-4-4" name="q-1-4" type="radio"><label for="q-1-4-4">Other</label></li>
                        </ul>
                    </div>
                </li>
                </ol>
                <ol data-group-index="3">
                <li>
                    <div>
                        <p class="label">What is your residential status?</p><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Credit card companies take your residential status into consideration when deciding whether to offer you a card, so this information helps us work out an eligibility score out of ten, to show how likely you are to be accepted for each card.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <ul>
                            <li><input id="q-1-5-0" name="q-1-5" type="radio"><label for="q-1-5-0">Homeowner</label></li>
                            <li><input id="q-1-5-1" name="q-1-5" type="radio"><label for="q-1-5-1">Private tenant</label></li>
                            <li><input id="q-1-5-2" name="q-1-5" type="radio"><label for="q-1-5-2">Council tenant</label></li>
                            <li><input id="q-1-5-3" name="q-1-5" type="radio"><label for="q-1-5-3">Living with parents</label></li>
                        </ul>
                    </div>
                </li>
                </ol>
                <ol data-group-index="4">
                <li>
                    <div>
                        <label for="address-0">What is your current address?</label><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">We use your address to help find your credit file. Please enter your address as it appears on official paperwork like utility bills or bank statements.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="address-0" name="address" placeholder="e.g. 12 Lock Road, Wirral" type="text">
                    </div>
                </li>
                </ol>
                <ol data-group-index="5">
                <li>
                    <div>
                        <label for="q-1-7-0">How long have you been at your current address</label>
                        <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">If you've moved home in the last two years, we may also need your previous address to help find your credit file.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-pseudo-select">
                            <select id="q-1-7-0" name="q-1-7-0">
                                <option disabled="disabled" selected>
                                    --Please select--
                                </option>
                                <option value="1">
                                    1 year
                                </option>
                                <option value="2">
                                    2 years
                                </option>
                                <option value="3">
                                    3 years
                                </option>
                                <option value="4">
                                    4 years
                                </option>
                                <option value="0">
                                    Less than a year
                                </option>
                                <option value="5">
                                    More than 5 years
                                </option>
                            </select>
                        </div>
                    </div>
                </li>
                </ol>
                <ol data-group-index="6">
                <li>
                    <div>
                        <p class="label">What’s your marital status?</p>
                        <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Some credit card companies use your marital status to help them decide whether to accept you as a customer.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <ul>
                            <li><input id="q-19-5-0" name="q-19-5" type="radio"><label for="q-19-5-0">Single</label></li>
                            <li><input id="q-19-5-1" name="q-19-5" type="radio"><label for="q-19-5-1">Married</label></li>
                            <li><input id="q-19-5-2" name="q-19-5" type="radio"><label for="q-19-5-2">Living with partner</label></li>
                            <li><input id="q-19-5-3" name="q-19-5" type="radio"><label for="q-19-5-3">Civil partnership</label></li>
                            <li><input id="q-19-5-4" name="q-19-5" type="radio"><label for="q-19-5-4">Widowed</label></li>
                            <li><input id="q-19-5-5" name="q-19-5" type="radio"><label for="q-19-5-5">Divorced</label></li>
                        </ul>
                    </div>
                </li>
                </ol>
                <ol data-group-index="0" class="last">
                <li>
                    <div>
                        <p class="label">Do you have any dependants?</p>
                        <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Dependants are people who rely on you financially, such as children or other family members.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <ul class="form-inline-radios">
                            <li><input data-show="dependants" id="q-59-5-0" name="q-59-5" type="radio" value="yes"><label for="q-59-5-0">Yes</label></li>
                            <li><input data-hide="dependants" id="q-59-5-1" name="q-59-5" type="radio" value="no"><label for="q-59-5-1">No</label></li>
                        </ul>
                    </div>
                </li>
                <li class="dependant hidden complete" data-dependant-id="dependants">
                    <div>
                        <p class="label">How many dependants do you have?</p>
                    </div>
                    <div>
                        <ul>
                            <li><input id="q-39-5-0" name="q-39-5" type="radio"><label for="q-39-5-0">1</label></li>
                            <li><input id="q-39-5-1" name="q-39-5" type="radio"><label for="q-39-5-1">2</label></li>
                            <li><input id="q-39-5-2" name="q-39-5" type="radio"><label for="q-39-5-2">3</label></li>
                            <li><input id="q-39-5-3" name="q-39-5" type="radio"><label for="q-39-5-3">Other</label></li>
                        </ul>
                    </div>
                </li>
                <li class="dependant  hidden complete" data-dependant-id="dependants">
                    <div>
                        <label for="child-costs-0">What’s your monthly share of childcare costs, spousal and child maintenance and school fees?</label>
                        <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Some credit card companies use details on what you pay each month towards childcare, child maintenance or school fees to help them decide whether to accept you as a customer.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="child-costs-0" name="child-costs" placeholder="e.g. 400" type="tel">
                    </div>
                </li><!--
    <li>
        <div>
            <label for="sorting-0">How would you like us to sort your card results?</label>
        </div>
        <div>
            <div class="form-pseudo-select">
                <select id="sorting-0" name="sorting">
                    <option disabled="disabled">
                        ==Please select==
                    </option>
                    <option class="bt btp all" value="btFee">
                        Balance transfer fee
                    </option>
                    <option class="bt btp all" value="btPeriod">
                        Balance transfer period
                    </option>
                    <option class="cb" value="cash">
                        Cash advance rate
                    </option>
                    <option class="bt pu btp re lr ov cb all" value="acceptance">
                        Chance of approval
                    </option>
                    <option class="bt pu btp re lr ov all" value="limit">
                        Credit limit
                    </option>
                    <option class="pu btp all" value="purchase">
                        Longest purchase offer
                    </option>
                    <option class="lr cb" value="apr">
                        Lowest APR
                    </option>
                    <option class="bt btp all" value="cost">
                        Lowest cost
                    </option>
                    <option class="ov" value="foreign">
                        Lowest foreign purchase fee
                    </option>
                    <option value="undefined">
                        Please select
                    </option>
                </select>
            </div>
        </div>
    </li>
-->
            </ol>
            
        </fieldset>
        <fieldset class="collapsable" id="btq">
            <legend><span>Affordability</span></legend>
            <ol class="active first" data-group-index="0">
                <li>
                    <div>
                        <p class="label">Who do you hold your current account with?</p><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Some lenders have special offers that are reserved just for their existing customers, so by knowing who you bank with we can show you which deals you qualify for, and which ones you aren't eligible for.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <ul>
                            <li><input data-hide="fullBankList" id="bankList-0" name="bankList" type="radio"><label for="bankList-0">Barclays Bank</label></li>
                            <li><input data-hide="fullBankList" id="bankList-1" name="bankList" type="radio"><label for="bankList-1">Natwest</label></li>
                            <li><input data-hide="fullBankList" id="bankList-2" name="bankList" type="radio"><label for="bankList-2">Halifax</label></li>
                            <li><input data-hide="fullBankList" id="bankList-3" name="bankList" type="radio"><label for="bankList-3">Lloyds Bank</label></li>
                            <li><input data-show="fullBankList" id="bankList-4" name="bankList" type="radio"><label for="bankList-4">Other</label></li>
                        </ul>
                    </div>
                </li>


                <li class="dependant hidden complete" id="fullBankList"  data-dependant-id="fullBankList">
                    <div>
                        <label for="fullBankList-0"></label>
                    </div>
                    <div>
                        <div class="form-pseudo-select">
                            <select id="fullBankList-0" name="fullBankList">
                                <option disabled="disabled">
                                    --Please select--
                                </option>
                                <option value="Acorn Account">
                                    Acorn Account
                                </option>
                                <option value="Bank of Cyprus UK">
                                    Bank of Cyprus UK
                                </option>
                                <option value="Bank of Ireland">
                                    Bank of Ireland
                                </option>
                                <option value="Bank of Scotland">
                                    Bank of Scotland
                                </option>
                                <option value="Barclays">
                                    Barclays
                                </option>
                                <option value="CardOneBanking">
                                    CardOneBanking
                                </option>
                                <option value="Cashplus">
                                    Cashplus
                                </option>
                                <option value="Cater Allen">
                                    Cater Allen
                                </option>
                                <option value="Citi">
                                    Citi
                                </option>
                                <option value="Clydesdale Bank">
                                    Clydesdale Bank
                                </option>
                                <option value="Coventry Building Society">
                                    Coventry Building Society
                                </option>
                                <option value="Cumberland">
                                    Cumberland
                                </option>
                                <option value="Danske Bank">
                                    Danske Bank
                                </option>
                                <option value="eccount money">
                                    eccount money
                                </option>
                                <option value="Ffrees">
                                    Ffrees
                                </option>
                                <option value="First Direct">
                                    First Direct
                                </option>
                                <option value="First Trust Bank">
                                    First Trust Bank
                                </option>
                                <option value="Halifax">
                                    Halifax
                                </option>
                                <option value="HSBC">
                                    HSBC
                                </option>
                                <option value="ICICI Bank UK">
                                    ICICI Bank UK
                                </option>
                                <option value="icount">
                                    icount
                                </option>
                                <option value="Investec Bank">
                                    Investec Bank
                                </option>
                                <option value="Lloyds Bank">
                                    Lloyds Bank
                                </option>
                                <option value="Lloyds Bank Private Banking">
                                    Lloyds Bank Private Banking
                                </option>
                                <option value="M&amp;S Bank">
                                    M&amp;S Bank
                                </option>
                                <option value="Metro Bank">
                                    Metro Bank
                                </option>
                                <option value="Nationwide">
                                    Nationwide
                                </option>
                                <option value="NatWest">
                                    NatWest
                                </option>
                                <option value="Norwich &amp; Peterborough Building Society">
                                    Norwich &amp; Peterborough Building Society
                                </option>
                                <option value="">
                                    Please select
                                </option>
                                <option value="Post Office">
                                    Post Office
                                </option>
                                <option value="Punjab National Bank (International) Ltd">
                                    Punjab National Bank (International) Ltd
                                </option>
                                <option value="Royal Bank of Scotland">
                                    Royal Bank of Scotland
                                </option>
                                <option value="Santander">
                                    Santander
                                </option>
                                <option value="Secure Trust Bank">
                                    Secure Trust Bank
                                </option>
                                <option value="Smile">
                                    Smile
                                </option>
                                <option value="State Bank of India">
                                    State Bank of India
                                </option>
                                <option value="Tesco Bank">
                                    Tesco Bank
                                </option>
                                <option value="The Co-operative Bank">
                                    The Co-operative Bank
                                </option>
                                <option value="thinkmoney">
                                    thinkmoney
                                </option>
                                <option value="Triodos Bank">
                                    Triodos Bank
                                </option>
                                <option value="TSB">
                                    TSB
                                </option>
                                <option value="Turkish Bank">
                                    Turkish Bank
                                </option>
                                <option value="Ulster Bank">
                                    Ulster Bank
                                </option>
                                <option value="United Bank UK">
                                    United Bank UK
                                </option>
                                <option value="Unity Trust Bank">
                                    Unity Trust Bank
                                </option>
                                <option value="Virgin Money">
                                    Virgin Money
                                </option>
                                <option value="Yorkshire Bank">
                                    Yorkshire Bank
                                </option>
                            </select>
                        </div>
                    </div>
                </li></ol>
                <ol data-group-index="1">
                
<!--
<li>
			<div>
				<label for="sorting-0">How would you like us to sort your card results?</label>
    <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Tell us how you’d like us to sort your list of cards. You’ll be able to change this when you see your cards, if you want to.</p>
                            </div>
                        </div>
			</div>
			<div>
				<div class="form-pseudo-select">
					<select id="sorting-0" name="sorting">
						<option disabled="disabled">
							--Please select--
						</option>
						<option class="bt btp all" value="btFee">
							Balance transfer fee
						</option>
						<option class="bt btp all" value="btPeriod">
							Balance transfer period
						</option>
						<option class="cb" value="cash">
							Cash advance rate
						</option>
						<option class="bt pu btp re lr ov cb all" value="acceptance">
							Chance of approval
						</option>
						<option class="bt pu btp re lr ov all" value="limit">
							Credit limit
						</option>
						<option class="pu btp all" value="purchase">
							Longest purchase offer
						</option>
						<option class="lr cb" value="apr">
							Lowest APR
						</option>
						<option class="bt btp all" value="cost">
							Lowest cost
						</option>
						<option class="ov" value="foreign">
							Lowest foreign purchase fee
						</option>
	
					</select>
				</div>
			</div>
		</li>
-->

                <li>
                    <div>
                        <label for="q-1-11-0">What is your annual income for the next 12 months?</label><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Please tell us your annual income (before tax) so we can show you the credit cards you have the best chance of being accepted for. Credit card companies want to know that you can afford your monthly payments, so if you think your income might decrease in the next 12 months, please tell us the lower figure. Make sure you tell us the right figure, so we can show you an accurate score for how likely you are to be accepted for each credit card.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="q-1-11-0" name="q-1-11" placeholder="e.g. 22000" type="tel">
                    </div>
                </li>
                
                
                <li>
                    <div>
                        <p class="label">Do you have other annual household income?</p>
                        <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Please tell us about any other household income you’ll receive over the next 12 months. Include things like your partner’s salary, savings or investments income and any income from rental property.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <ul class="form-inline-radios">
                            <li><input data-show="otherIncome" id="q-69-5-0" name="q-69-5" type="radio" value="yes"><label for="q-69-5-0">Yes</label></li>
                            <li><input data-hide="otherIncome" id="q-69-5-1" name="q-69-5" type="radio" value="no"><label for="q-69-5-1">No</label></li>
                        </ul>
                    </div>
                </li>
                <li class="dependant hidden complete" data-dependant-id="otherIncome">
                    <div>
                        <label for="other-income-0">What is your other household income?</label>
                    </div>
                    <div>
                        <input id="other-income-0" name="other-income" placeholder="e.g. 400" type="tel">
                    </div>
                </li>
                </ol>
                <ol class="last" data-group-index="0">
                
                <li class="" >
                    <div>
                        <label for="rent">What's your monthly rent or mortgage payment(s)?</label>
                        <a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">Please tell us how much you pay each month for rent or mortgage repayment. Credit card companies use this information to make sure you can afford your monthly repayments.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="rent" name="rent" placeholder="e.g. 400" type="tel">
                    </div>
                </li>
                
                
                
            </ol>
            
        </fieldset>
        <fieldset class="collapsable">
            <legend><span>Contact details</span></legend>
            <ol class="active first"  data-group-index="0">
                <li>
                    <div>
                        <label for="q-3-0-0">What is your email address?</label>
                    </div>
                    <div>
                        <input id="q-3-0-0" name="q-3-0" placeholder="Email address" type="email">
                    </div>
                </li>
                <li>
                    <div>
                        <label for="q-3-0-100">Please confirm your email address</label><a class="form-help-trigger"><span>Need help?</span></a>
                        <div class="form-help-wrap">
                            <div class="help-msg">
                                <p class="help-text">We want to keep your information secure, so let's make sure we have it right.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input id="q-3-0-1000" name="q-3-0" placeholder="Email address" type="email">
                    </div>
                </li>
                </ol>
                <ol data-group-index="1" class="last final">
                
                <li>
                    <div>
                        <p class="label">Receive saving tips and offers</p><small class="form-hint">I agree to let Moneysupermarket Group contact me with money saving tips and special offers via:</small>
                    </div>
                    <div>
                        <ul>
                            <li><input id="q-3-1-0" name="q-3-1" type="checkbox" value="Email"><label for="q-3-1-0">Email</label></li>
                            <li><input id="q-3-1-1" name="q-3-1" type="checkbox" value="Phone"><label for="q-3-1-1">Phone</label></li>
                            <li><input id="q-3-1-2" name="q-3-1" type="checkbox" value="Text"><label for="q-3-1-2">Text</label></li>
                        </ul>
                        <strong>By clicking <b>See your cards</b>, you are agreeing to our terms &amp; conditions and privacy policy</strong>
                    </div>
                </li>
                <li>
                
                </li>
            </ol>
            
        </fieldset>
        
</div>
<div class="question-actions" id="qa">
<button id="previousQ" class="previous disabled">Back</button>
<button id="nextQ" class="next disabled">Next</button>
</div>
    </div>
</form>
</main>
        
<script>

//
var b = document.body;
var qA = document.getElementById('qa');
var nextQBtn = document.getElementById('nextQ');
var prevQBtn = document.getElementById('previousQ')
var fieldsets = b.querySelectorAll('fieldset');
var groups = b.querySelectorAll('fieldset > ol');
//var progressEl = b.querySelector('progress');
var currentGroupIndex = 0;
var currentFieldsetIndex = 0;
var currentProgressScore = 0;
var numberOfSets = 4;
var completionArray = [0,0,0,0];
var readyForNextGroup = false;
var readyForNextSet = false;

var qaPos = document.body.clientHeight - 86;
qA.style.top = qaPos + 'px';

prevQBtn.addEventListener('click',function(evt){
    evt.preventDefault();
    var el = evt.target;
    var currentFieldset = fieldsets[currentFieldsetIndex];
    var currentGroup = groups[currentGroupIndex];
    //currentGroupIndex = currentGroupIndex - 1;
    if( currentGroup.classList.contains('first') ){
        // Leave active class on so we can step forwards again
        currentFieldset.classList.remove('active');
        currentFieldset.classList.remove('complete');
        if( currentGroupIndex > 0 ){
            currentGroupIndex = currentGroupIndex - 1;
        } else {
            currentGroupIndex = 0;
        }
        if( currentFieldsetIndex > 0 ){
            currentFieldsetIndex = currentFieldsetIndex - 1;
        } else {
            currentFieldsetIndex = 0;
        }
        fieldsets[currentFieldsetIndex].classList.remove('complete');
        fieldsets[currentFieldsetIndex].classList.add('active');
        //document.getElementById('currentSection').textContent = fieldsets[currentFieldsetIndex].querySelector('legend span').textContent;
    } else {
        // Remove active class
        currentGroup.classList.remove('active');
        currentGroupIndex = currentGroupIndex - 1;
        nextGroup = groups[currentGroupIndex];
        nextGroup.classList.remove('complete');
        nextGroup.classList.add('active');
    }
    nextQBtn.classList.add('enabled');
    nextQBtn.classList.remove('disabled');
    nextQBtn.textContent = 'Next';
});

nextQBtn.addEventListener('click',function(evt){
    evt.preventDefault();
    var el = evt.target;
    var currentFieldset = fieldsets[currentFieldsetIndex];
    var currentGroup = groups[currentGroupIndex];
    console.log('Next button clicked');
    console.log('Current group is');
    console.log(currentGroup);
    console.log('Current set is');
    console.log(currentFieldset);
    if( currentGroup.classList.contains('final') ){
        
        window.location = 'https://www.moneysupermarket.com/credit-cards/balance-transfer/';
    }
    if( currentGroup.getAttribute('data-complete') == 'true' ){
        if( currentGroup.classList.contains('last') ){
            // onto the next fieldset
            currentGroupIndex ++;
            console.log('Current fieldset is complete - onto the next');
            currentFieldset.classList.remove('active');
            currentFieldset.classList.add('complete');
            currentFieldset.nextElementSibling.classList.add('active');
            currentFieldsetIndex ++;
            //document.getElementById('currentSection').textContent = fieldsets[currentFieldsetIndex].querySelector('legend span').textContent;
            
            var nextGroup = groups[currentGroupIndex];
            nextGroup.classList.add('active');
            if( nextGroup.getAttribute('data-complete') == 'true' ){
                nextQBtn.classList.add('enabled');
                nextQBtn.classList.remove('disabled');
            } else {
                nextQBtn.classList.remove('enabled');
                nextQBtn.classList.add('disabled');
            
            }
            prevQBtn.classList.remove('disabled');
            
        } else {
            console.log(currentGroup);
            currentGroup.classList.remove('active');
            currentGroup.classList.add('complete');
            currentGroupIndex ++;
            var nextGroup = groups[currentGroupIndex];
            nextGroup.classList.add('active');
            if( nextGroup.getAttribute('data-complete') == 'true' ){
                nextQBtn.classList.add('enabled');
                nextQBtn.classList.remove('disabled');
            } else {
                nextQBtn.classList.remove('enabled');
                nextQBtn.classList.add('disabled');
            
            }
            
            prevQBtn.classList.remove('disabled');
            
            if( nextGroup.classList.contains('final') ){
                el.classList.remove('disabled');
                el.classList.add('enabled');
                nextQBtn.textContent = 'See your cards';
            } else {
                nextQBtn.textContent = 'Next';
            }
        }   
    }
});



document.getElementById('start').addEventListener('click',function(evt){
    evt.preventDefault();
    b.classList.add('started');
});

var checkGroupCompletion = function(group){
    //console.log(group);
    var rows = group.querySelectorAll(':scope > li');
    var isComplete = true;
    var rowCount = 0;
    var completedCount = 0;
    rows.forEach(function(el){
        if( !el.classList.contains('hidden') ){
            rowCount ++;
        }
        
        if( !el.classList.contains('complete') ){
            isComplete = false;
        } else if( el.classList.contains('complete') ){
            completedCount ++;
        }
    });
    //console.log('Number of questions in group: ' + rowCount);
    //console.log('Number of completed questions in group: ' + completedCount);
    if( isComplete ){
        group.setAttribute('data-complete',true);
        console.log('All group questions complete');
        nextQBtn.classList.remove('disabled');
        //nextQBtn.classList.add('question-enabled');
        nextQBtn.classList.add('enabled');
    } else {
        console.warn('There are unanswered group questions');
    }
};

var checkFieldsetCompletion = function(fieldset){
    var rows = fieldset.querySelectorAll('ol > li');
    var isComplete = true;
    var rowCount = 0;
    var completedCount = 0;
    rows.forEach(function(el){
        if( !el.classList.contains('hidden') ){
            rowCount ++;
        }
        
        if( !el.classList.contains('complete') ){
            isComplete = false;
        } else if( el.classList.contains('complete') ){
            completedCount ++;
        }
    });
    //console.log('Number of questions in set: ' + rowCount);
    //console.log('Number of completed questions in set: ' + completedCount);
    var completionPercentage = ( completedCount/rowCount * 100 ) / 4;
    completionArray[currentFieldsetIndex] = completionPercentage;
    var formCompletionPercentage = completionArray[0] + completionArray[1] + completionArray[2] + completionArray[3];
//    var formCompletionPercentage = completionPercentage / numberOfSet;
    //console.log('Section completion percentage: ' + completionPercentage + '%' );
    //console.log('Form completion percentage: ' + formCompletionPercentage + '%' );
    //progressEl.value = formCompletionPercentage;
    if( isComplete ){
        console.log('All questions in set complete');
        fieldset.setAttribute('data-complete',true);
        nextQBtn.classList.remove('disabled');
        //nextQBtn.classList.remove('question-enabled');
        nextQBtn.classList.add('enabled');
    } else {
        console.warn('There are unanswered set questions');
    }
    
};

var inputs = b.querySelectorAll('input');
inputs.forEach(function(el){
    var row;
    if( el.type === 'radio' | el.type === 'checkbox' ){
        //console.log('Radio/Checkbox');
        el.addEventListener('click',function(){
            if (el.getAttribute('data-hide')) {
                var targetRow = document.body.querySelectorAll('[data-dependant-id=' + el.getAttribute('data-hide') + ']');
                targetRow.forEach(function(t){
                    t.classList.add('hidden');
                    t.classList.add('complete');
                    
                });
            }
            if (el.getAttribute('data-show')) {
                var targetRow = document.body.querySelectorAll('[data-dependant-id=' + el.getAttribute('data-show') + ']');
                targetRow.forEach(function(t){
                    t.classList.remove('hidden');
                    t.classList.remove('complete');
                });
            }
            //console.log('Input clicked');
            row = el.parentElement.parentElement.parentElement.parentElement;
            row.classList.add('complete');
            checkGroupCompletion(row.parentElement);
            checkFieldsetCompletion(row.parentElement.parentElement);
        });
    } else {
        //console.log('Standard input');
        el.addEventListener('keyup',function(){
            if( el.id === 'q-3-0-0'){
                console.log('Dont bother');
                row = el.parentElement.parentElement;
            } else {
                if( el.parentElement.classList.contains('form-date-wrap') ){
                    row = el.parentElement.parentElement.parentElement;
                } else {
                    row = el.parentElement.parentElement;
                }
            }
            row.classList.add('complete');
            checkGroupCompletion(row.parentElement);
            checkFieldsetCompletion(row.parentElement.parentElement);
        });
    }
});

var selects = b.querySelectorAll('select');
selects.forEach(function(el){
    el.addEventListener('change',function(){
        var row = el.parentElement.parentElement.parentElement;
        row.classList.add('complete');
        checkGroupCompletion(row.parentElement);
        checkFieldsetCompletion(row.parentElement.parentElement);
    });
});

var formHelpTriggers = document.querySelectorAll('.form-help-trigger');
            formHelpTriggers.forEach(function(el){
                el.addEventListener('click',function(evt){
                    evt.preventDefault();
                    if( this.classList.contains('open') ){
                        this.classList.remove('open');
                        this.firstElementChild.textContent = 'Need help?';
                    } else {
                        this.classList.add('open');
                        this.firstElementChild.textContent = 'Hide help';
                    }
                });
            });

</script>
    </body>
</html>
